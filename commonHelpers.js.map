{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst refs = {\n    form: document.querySelector('#form'),\n    input: document.querySelector('.input'),\n    container: document.querySelector('.container'),\n    loading: document.querySelector('.loading')\n}\n\nconst lightbox = new SimpleLightbox('.container a', { /* options */ });\n\nrefs.form.addEventListener('submit', (event) => {\n    event.preventDefault();\n    \n    const form = event.currentTarget;\n    const query = form.elements.query.value;\n\n    if (!query.trim()) {\n        return;\n    }\n\n    refs.loading.style.display = 'block';\n\n    getPhotos(query).then(handlePhotos).catch(onFetchError).finally(() => {\n        form.reset();\n\n        refs.loading.style.display = 'none';\n    });\n\n})\n    \nconst API_KEY = \"42114323-50c2b50fedad4076dc7ba42b5\";\nconst BASE_URL = \"https://pixabay.com/api/\"; \n\n\nfunction getPixabayPhotoUrl(query) {\n    return `${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&safesearch=true&q=${query}` \n}\n\nfunction getPhotos(query) {\n    const url = getPixabayPhotoUrl(query);\n    return fetch(url).then((resp) => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText);\n        }\n        return resp.json();\n    }\n    ).then(({ hits }) => hits);\n}\n\nfunction onFetchError() {\n    iziToast.error({\n    title: 'Sorry, something went wrong.',\n});\n}\n\nfunction onEmptyResults() {\n    iziToast.error({\n        title: 'Sorry, there are no images matching your search query. Please try again!',\n    })\n}\n\nfunction handlePhotos(photos) {\n    if (photos.length === 0) {\n        refs.container.innerHTML = ''\n        return onEmptyResults();\n    } \n\n    renderPhotos(photos);\n\n    lightbox.refresh()\n}\n\nfunction renderPhotos(photos) {\n    const photosHtml = photos.map((photo) =>\n        getPhotoHtml(photo)\n    ).join(\" \");\n\n    console.log(photosHtml);\n\n    refs.container.innerHTML = photosHtml;\n}\n\nfunction getPhotoHtml({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `\n    <a href=\"${largeImageURL}\">\n    <div class=\"card\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\">\n<ul class=\"photo_details\">\n<li>\n<span class=\"photo_details_paragraph\">Likes</span><br>\n<span>${likes}</span>\n</li>\n<li>\n<span class=\"photo_details_paragraph\">Views</span><br>\n<span>${views}</span>\n</li>\n<li>\n<span class=\"photo_details_paragraph\">Comments</span><br>\n<span>${comments}</span>\n</li>\n<li>\n<span class=\"photo_details_paragraph\">Downloads</span><br>\n<span>${downloads}</span>\n</li>\n</ul>\n    </div>\n    </a>\n    `\n}\n\n"],"names":["refs","lightbox","SimpleLightbox","event","form","query","getPhotos","handlePhotos","onFetchError","API_KEY","BASE_URL","getPixabayPhotoUrl","url","resp","hits","iziToast","onEmptyResults","photos","renderPhotos","photosHtml","photo","getPhotoHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAO,CACT,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,UAAW,SAAS,cAAc,YAAY,EAC9C,QAAS,SAAS,cAAc,UAAU,CAC9C,EAEMC,EAAW,IAAIC,EAAe,eAAgB,CAAiB,CAAA,EAErEF,EAAK,KAAK,iBAAiB,SAAWG,GAAU,CAC5CA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAE7BC,EAAM,SAIXL,EAAK,QAAQ,MAAM,QAAU,QAE7BM,EAAUD,CAAK,EAAE,KAAKE,CAAY,EAAE,MAAMC,CAAY,EAAE,QAAQ,IAAM,CAClEJ,EAAK,MAAK,EAEVJ,EAAK,QAAQ,MAAM,QAAU,MACrC,CAAK,EAEL,CAAC,EAED,MAAMS,EAAU,qCACVC,EAAW,2BAGjB,SAASC,EAAmBN,EAAO,CAC/B,MAAO,GAAGK,SAAgBD,+DAAqEJ,GACnG,CAEA,SAASC,EAAUD,EAAO,CACtB,MAAMO,EAAMD,EAAmBN,CAAK,EACpC,OAAO,MAAMO,CAAG,EAAE,KAAMC,GAAS,CAC7B,GAAI,CAACA,EAAK,GACN,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,MACf,CACA,EAAC,KAAK,CAAC,CAAE,KAAAC,CAAM,IAAKA,CAAI,CAC7B,CAEA,SAASN,GAAe,CACpBO,EAAS,MAAM,CACf,MAAO,8BACX,CAAC,CACD,CAEA,SAASC,GAAiB,CACtBD,EAAS,MAAM,CACX,MAAO,0EACf,CAAK,CACL,CAEA,SAASR,EAAaU,EAAQ,CAC1B,GAAIA,EAAO,SAAW,EAClB,OAAAjB,EAAK,UAAU,UAAY,GACpBgB,EAAc,EAGzBE,EAAaD,CAAM,EAEnBhB,EAAS,QAAS,CACtB,CAEA,SAASiB,EAAaD,EAAQ,CAC1B,MAAME,EAAaF,EAAO,IAAKG,GAC3BC,EAAaD,CAAK,CAC1B,EAAM,KAAK,GAAG,EAEV,QAAQ,IAAID,CAAU,EAEtBnB,EAAK,UAAU,UAAYmB,CAC/B,CAEA,SAASE,EAAa,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAG,CAC1F,MAAO;AAAA,eACIL;AAAA;AAAA,gBAECD,WAAsBE;AAAA;AAAA;AAAA;AAAA,QAI9BC;AAAA;AAAA;AAAA;AAAA,QAIAC;AAAA;AAAA;AAAA;AAAA,QAIAC;AAAA;AAAA;AAAA;AAAA,QAIAC;AAAA;AAAA;AAAA;AAAA;AAAA,KAMR"}